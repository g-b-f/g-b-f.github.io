<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<link rel="stylesheet" href="../gabe_stylesheet.css">
	<title>Palestine form</title>
</head>
<body>

<!-- 
    TODO:
    - add custom names etc
    - fix copy button
    - change to <p> if possible
 -->

<h1>Palestine form</h1>

<div class = "mainbox">
<p>
Fill in the below details and click "Generate" to create a form to be sent to your local MP:<br><br>
Full name: <input id="fullName" type="text" size="30"><br>
MP name (including title): <input id="mpName" type="text" size="30" value="Ms. Kate Hollern"><br>
MP's party:<input id="party" type="text" size="30" value="Labour"><br>
MP's Email address: <input id="mpEmail" type="text" size="30" value="kate.hollern.mp@parliament.uk"><br>
Constituency: <input id="area" type="text" size="30" value="Blackburn"><br>
</p>



<button class="jsButton" onclick="letterGen()">Generate</button>
<textarea id="outputText" rows="20" cols="80"></textarea>
<!-- <p id="outputText"></p> -->
<p id="copySend"></p>

</div>

</body>

<script>

function strReplace(mpName,area,author,party,newLine){

var letterText=`Dear ${mpName},${newLine} ${newLine}\
This is an open letter requesting your stance on recent world events. We, the concerned constituents of \
${area}, urgently write to you regarding the escalating crisis in Palestine â€”an issue of immense \
importance to our community. ${newLine}\
${area} has consistently demonstrated its unwavering opposition to Israeli apartheid policies and \
actions that severely impact Palestinian citizens and their land. Over many years, our community has \
united through demonstrations, protests, and campaigns, voicing collective opposition against these \
injustices. We firmly assert that the ${party} Party should unequivocally refrain from involvement in \
the supply of support, arms, aid, and weapons to Israel. ${newLine}\
Therefore, we fervently push for you to represent these views within the ${party} Party. Specifically, \
we urge you to advocate for the official recognition of the State of Palestine on the international stage. \
Recognizing Palestine as a sovereign state is a critical step towards fostering peace, justice, and \
equality in the region. By actively promoting this recognition, you would echo the sentiments of the \
constituents of ${area}, underscoring the importance of a fair and lasting resolution to the \
longstanding crisis in the Middle East. We believe that your representation of these views within the \
${party} Party will ensure that the concerns and aspirations of our constituency are well reflected and \
respected on this pressing matter. ${newLine}\
However, we have observed a notable absence of public statements or actions from you, our esteemed \
representative in Parliament, on this pressing issue. Given the sentiments of our community, it is \
imperative for us to understand your stance and actions concerning the situation in Palestine. We are \
eager to know why there has been no expression of your views or actions that resonate with the \
concerns shared by your constituents. ${newLine}\
Recent events have added urgency to our appeal. The defence by Palestinian forces against the \
blockade, the brazen violations of international law targeting schools and hospitals by the Israeli \
government, and the recent total blockade resulting in severe deprivation of essential supplies such as \
food, electricity, water, and the denial of escape from the Gaza area have profoundly shaken our \
community. We are compelled to seek your input and leadership on these critical matters. \
We are keen to understand your perspective and what actions, if any, you plan to take to address this \
crisis. Additionally, we would appreciate any information on how you plan to represent our collective \
concerns in the UK Government and the ${party} Party. ${newLine}\
Your response to this matter will provide clarity and assurance to the constituents of ${area} \
regarding your position and actions concerning the situation in Palestine. We eagerly await your reply \
and appreciate your attention to this vital issue. ${newLine}\
Sincerely,${newLine} ${newLine}\
${author} ${newLine}\
Constituent of ${area}`;

    return letterText;
}

function copyText(){
  var inputText = document.getElementById("outputText");

  // Select the text field
  inputText.select();
  inputText.setSelectionRange(0, 99999); // For mobile devices

  // Copy the text inside the text field
  navigator.clipboard.writeText(inputText.value);
  
  // Alert the copied text
  alert("Copied!");
}

function CopyToClipboard() {
    containerid="outputText"
    if (document.selection) {
        var range = document.body.createTextRange();
        range.moveToElementText(document.getElementById(containerid));
        range.select().createTextRange();
        document.execCommand("copy");
    } else if (window.getSelection) {
        var range = document.createRange();
        range.selectNode(document.getElementById(containerid));
        window.getSelection().addRange(range);
        document.execCommand("copy");
        alert("Text has been copied, now paste in the text-area")
    }
}


function letterGen() {
    // let area="Blackburn";
    let area = document.getElementById("area").value;
    let mpName = document.getElementById("mpName").value;

    // let mpName="Ms. Kate Hollern";
    let mpEmail = document.getElementById("mpEmail").value;
    // let mpEmail="kate.hollern.mp@parliament.uk";
    let party = document.getElementById("party").value;

    // let party="Labour";
    // let newLine="<br>";
    let newLine=" \n"
    let author = document.getElementById("fullName").value;

    let letterText = strReplace(mpName,area,author,party,newLine);
    document.getElementById("outputText").innerHTML = letterText;

    let mail=`${mpEmail}&subject=Request%20for%20Your%20Stance%20on%20Recent%20Events%20in%20Palestine`;
    let sendButton = `<button class="jsButton" onclick="location.href='${mail}'">Send</button>`;
    // let sendButton=`<a class="jsButton" href="mailto:${mpEmail}">Send</a>`;

    // let copyButton=`<button class="jsButton" onclick="CopyToClipboard()">Copy</button>`;
    // let copyButton=`<button class="jsButton" onclick="copyText()">Copy</button>`;
    // document.getElementById("copySend").innerHTML = copyButton;
    document.getElementById("copySend").innerHTML = sendButton;

}
</script>
</html>